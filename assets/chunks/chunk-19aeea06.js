function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b=_toPropertyKey(b),b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toPropertyKey(a){var b=_toPrimitive(a,"string");return"symbol"==typeof b?b:b+""}function _toPrimitive(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function pe(){return!("u"<typeof process)&&process.cwd&&process.versions&&!("u"<typeof process.versions.node)&&process.release&&"node"===process.release.name}function z(a,b){var c;{var d=Error.stackTraceLimit;Error.stackTraceLimit=1/0,c=new Error(a),Error.stackTraceLimit=d}return pe()&&(c.stack=me(c.stack,b)),c}function me(a,b){if(!a)return a;var c=ve(a),d=0;return c.filter(a=>!(a.includes(" (internal/")||a.includes(" (node:internal"))&&(!(d<b&&ye(a))||(d++,!1))).join("\n")}function ye(a){return a.startsWith("    at ")}function ve(a){return a.split(/\r?\n/)}function P(a,b){var c=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return c[a]=c[a]||b}function w(a){return"object"==typeof a&&null!==a}function V(a){return Array.from(new Set(a))}var b=P("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),ne="Make sure your client-side code doesn't include(/bundle)",se="The client runtime of Server Routing and the client runtime of Client Routing are both being loaded. ".concat("Make sure your client-side code doesn't include(/bundle)"," both for a given page."),B="Two vite-plugin-ssr client runtime instances are being loaded. ".concat("Make sure your client-side code doesn't include(/bundle)"," vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)");function U(){{var a=V(b.instances);if(1<a.length){var c="Both vite-plugin-ssr@".concat(a[0]," and vite-plugin-ssr@").concat(a[1]," loaded. Only one version should be loaded.");be(!1,c)}}b.checkSingleInstance&&1<b.instances.length&&I(!1,B,{onlyOnce:!0,showStackTrace:!0})}function Ft(a){I(!0!==b.isClientRouting,se,{onlyOnce:!0,showStackTrace:!0}),I(void 0===b.isClientRouting,B,{onlyOnce:!0,showStackTrace:!0}),b.isClientRouting=!1,a&&(b.checkSingleInstance=!0),U()}function Ot(a){I(!1!==b.isClientRouting,se,{onlyOnce:!0,showStackTrace:!0}),I(void 0===b.isClientRouting,B,{onlyOnce:!0,showStackTrace:!0}),b.isClientRouting=!0,a&&(b.checkSingleInstance=!0),U()}function Ee(a){b.instances.push(a),U()}function be(a,b){if(!a){var c="[vite-plugin-ssr][Wrong Usage] ".concat(b);throw new Error(c)}}function I(c,d,e){var{onlyOnce:f,showStackTrace:g}=e;if(!c){var h="[vite-plugin-ssr][Warning] ".concat(d);if(f){var{alreadyLogged:i}=b,j=!0===f?h:f;if(i.has(j))return;i.add(j)}console.warn(g?new Error(h):h)}}var we="0.4.133",S={projectName:"vite-plugin-ssr",projectVersion:"0.4.133",npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};Ee(S.projectVersion);var v=P("utils/assert.ts",{alreadyLogged:new Set,logger(a,b){"info"===b?console.log(a):console.warn(a)},colorer:a=>a,showStackTraceList:new WeakSet}),_e="[".concat(S.npmPackageName,"]"),Re="[".concat(S.npmPackageName,"@").concat(S.projectVersion,"]"),H=2;function i(a,b){var c;if(!a){var d=(()=>{if(!b)return null;var c="string"==typeof b?b:"`"+JSON.stringify(b)+"`";return"Debug info (this is for the ".concat(S.projectName," maintainers; you can ignore this): ").concat(c)})(),e=["You stumbled upon a bug in ".concat(S.projectName,"'s source code."),"Go to ".concat(S.githubRepository,"/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours)."),d].filter(Boolean).join(" ");e=j(e,"Bug"),e=L(e,!0);var f=z(e,H);throw null===(c=v.onBeforeLog)||void 0===c||c.call(v),f}}function y(a,b){var c,{showStackTrace:d}=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(!a){b=j(b,"Wrong Usage"),b=L(b);var e=z(b,H);throw d&&v.showStackTraceList.add(e),null===(c=v.onBeforeLog)||void 0===c||c.call(v),e}}function Se(a){return a=j(a,"Error"),a=L(a),z(a,H)}function $(b,c){var d,{onlyOnce:f=!0,showStackTrace:e}=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(!b){if(c=j(c,"Warning"),c=L(c),f){var{alreadyLogged:g}=v,h=!0===f?c:f;if(g.has(h))return;g.add(h)}if(null===(d=v.onBeforeLog)||void 0===d||d.call(v),e){var a=new Error(c);v.showStackTraceList.add(a),v.logger(a,"warn")}else v.logger(c,"warn")}}function kt(a,b,c){var d,{onlyOnce:e}=c;if(!a){if(b=j(b,"Info"),b=L(b),e){var{alreadyLogged:f}=v,g=b;if(f.has(g))return;f.add(g)}null===(d=v.onBeforeLog)||void 0===d||d.call(v),v.logger(b,"info")}}function j(a,b){var c="[".concat(b,"]"),d="Info"===b?"blue":"Warning"===b?"yellow":"red";c=v.colorer(c,d);var e=a.startsWith("[")?"":" ";return"".concat(c).concat(e).concat(a)}function L(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];return"".concat(b?Re:_e).concat(a)}function G(){return"u">typeof window&&"number"==typeof window.scrollY}var O=P("utils/assertRouterType.ts",{});function xt(){re($e()),O.isClientRouting=!0}function $e(){return!1!==O.isClientRouting}function Ct(){re(!0!==O.isClientRouting),O.isClientRouting=!1}function re(a){y(G(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),$(a,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}var Te=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],ie=["vue","svelte","marko","md","mdx"],Pe=[...Te,...ie];function oe(a){var b=Pe.some(b=>a.endsWith("."+b));return i(!Ie(a)||b),b}function Ie(a){return /\.(c|m)?(j|t)sx?$/.test(a)}function je(a){return ie.some(b=>a.endsWith("."+b))}function k(a,b,c){return"string"==typeof a?q(a.split(""),b,c).join(""):q(a,b,c)}function q(b,c,d){var e=[],f=0<=c?c:b.length+c;i(0<=f&&f<=b.length);var g=0<=d?d:b.length+d;for(i(0<=g&&g<=b.length);!(f===g||(f===b.length&&(f=0),f===g));){var h=b[f];i(void 0!==h),e.push(h),f++}return e}function ae(a){return a.startsWith("/")||a.startsWith("http")||a.startsWith("tauri://")||a.startsWith(".")||a.startsWith("?")||a.startsWith("#")||""===a}function Wt(a,b){i(b.includes(" but ")),y("string"==typeof a,"".concat(b," should be a string")),ae(a)||(a.startsWith("/")||a.includes(":")?y(!1,"".concat(b," isn't a valid URL")):y(!1,"".concat(b," is '").concat(a,"' and it should be '/").concat(a,"' instead (URL pathnames should start with a leading slash)")))}function Le(b,e){i(ae(b),{url:b}),i(e.startsWith("/"),{url:b,baseServer:e});var[f,...j]=b.split("#");i(void 0!==f);var k=["",...j].join("#")||null;i(null===k||k.startsWith("#"));var n=null===k?"":A(k.slice(1)),[o,...a]=f.split("?");i(void 0!==o);var l=["",...a].join("?")||null;i(null===l||l.startsWith("?"),{url:b,searchOriginal:l});var c={},q={};Array.from(new URLSearchParams(l||"")).forEach(a=>{var[b,d]=a;c[b]=d,q[b]=[...(q[b]||[]),d]});var{origin:g,pathnameResolved:d}=Oe(o,e);i(null===g||g===A(g),{origin:g}),i(d.startsWith("/"),{url:b,pathnameResolved:d}),i(null===g||b.startsWith(g),{url:b,origin:g});var p=o.slice((g||"").length);{var h="".concat(g||"").concat(p).concat(l||"").concat(k||"");i(b===h,{url:b,urlRecreated:h})}var{pathname:r,hasBaseServer:s}=xe(d,e);return r=Fe(r),i(r.startsWith("/")),{origin:g,pathname:r,pathnameOriginal:p,hasBaseServer:s,search:c,searchAll:q,searchOriginal:l,hash:n,hashOriginal:k}}function A(a){try{return decodeURIComponent(a)}catch(a){}try{return decodeURI(a)}catch(a){}return a}function Fe(a){return a.split("/").map(a=>A(a).split("/").join("%2F")).join("/")}function Oe(b,d){var f;if(b.startsWith("//"))return{origin:null,pathnameResolved:b};var g=!1,h="tauri://",j="http://";b.startsWith(h)&&(g=!0,b=j+b.slice(h.length));var k,m;try{var o=new URL(b);k=o.origin,m=o.pathname}catch(a){k=null;var c="u">typeof window&&(null===(f=null==window?void 0:window.document)||void 0===f?void 0:f.baseURI);c=c||"http://fake.example.org"+d,m=new URL(b,c).pathname}return m||(m="/"),g&&(i(k),i(k.startsWith(j)),k=h+k.slice(j.length)),i(m.startsWith("/"),{urlWithoutSearch:b,pathnameResolved:m}),i(m===m.split("?")[0].split("#")[0]),{origin:k,pathnameResolved:m}}function ke(a){i(a.startsWith("/")),i(!a.includes("?")),i(!a.includes("#"))}function xe(a,b){ke(a),i(Ce(b));var c=a;if(i(c.startsWith("/")),i(b.startsWith("/")),"/"===b)return{pathname:a,hasBaseServer:!0};var d=b;return b.endsWith("/")&&c===k(b,0,-1)&&(d=k(b,0,-1),i(c===d)),c.startsWith(d)?(i(c.startsWith("/")||c.startsWith("http")),i(c.startsWith(d)),c=c.slice(d.length),c.startsWith("/")||(c="/"+c),i(c.startsWith("/")),{pathname:c,hasBaseServer:!0}):{pathname:a,hasBaseServer:!1}}function Ce(a){return a.startsWith("/")}function M(a,b){Object.assign(a,b)}function x(a){return a instanceof Function||"function"==typeof a}function At(a){return(b,c)=>{var d=a(b),e=a(c);return d===e?0:d>e?-1:1}}function We(a){return(b,c)=>{var d=a(b),e=a(c);return(i([!0,!1,null].includes(d)),i([!0,!1,null].includes(e)),d===e)?0:!0===d||!1===e?-1:!0===e||!1===d?1:void i(!1)}}function Ae(a){return We(b=>{var c=a(b);return null===c?null:!c})}function f(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"unknown";if(!w(a))return!1;if(!(b in a))return"undefined"===c;if("unknown"===c)return!0;var d=a[b];return"array"===c?Array.isArray(d):"object"===c?w(d):"string[]"===c?Array.isArray(d)&&d.every(a=>"string"==typeof a):"function"===c?x(d):Array.isArray(c)?"string"==typeof d&&c.includes(d):"null"===c?null===d:"undefined"===c?void 0===d:"true"===c?!0===d:"false"===c?!1===d:typeof d===c}function De(a,b){return a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:0}var Ne=a=>null!=a,ze="\\";function le(a){var b=a=>"Not a posix path: ".concat(a);i(null!==a,b("null")),i("string"==typeof a,b("typeof path === '".concat(typeof a,"'"))),i(""!==a,b("(empty string)")),i(a),i(!a.includes(ze),b(a))}var Ve=["$$registrations","_rerender_only"],Be=[".md",".mdx"];function Ue(a,b){He(a,b,!0)}function He(b,c,d){var e=Object.keys(b).filter(a=>!Ve.includes(a)),f=e.filter(a=>"default"!==a),g=e.includes("default");if(0===f.length){if(g)return;i(0===e.length),y(!1,"".concat(c," doesn't export any value, but it should have a `export default` instead"))}else if(!Be.some(a=>c.endsWith(a))){var a=f.join(", ");d?$(0===f.length,"".concat(c," should only have a default export: remove `export { ").concat(a," }`"),{onlyOnce:!0}):$(0===f.length,"".concat(c," replace `export { ").concat(a," }` with `export default { ").concat(a," }`"),{onlyOnce:!0})}}function Ge(a){return Object.entries(a)}var Me=["clientRouting"];function Je(a){Me.forEach(b=>{if(i(a.fileExports),!!(b in a.fileExports)){var c="The value of `".concat(b,"` is only allowed to be `true`.");y(!1!==a.fileExports[b],"".concat(a.filePath," has `export { ").concat(b," }` with the value `false` which is prohibited: remove `export { ").concat(b," }` instead. (").concat(c,")")),y(!0===a.fileExports[b],"".concat(a.filePath," has `export { ").concat(b," }` with a forbidden value. ").concat(c))}})}var ce=["render","clientRouting","prerender","doNotPrerender"];function Ye(a,b){y(!ce.includes(a),"".concat(b," has `export default { ").concat(a," }` which is prohibited, use `export { ").concat(a," }` instead."))}function qe(b,e){var f={},j={},k={};if(b.forEach(a=>{Ke(a).forEach(b=>{var c,{exportName:e,exportValue:f,isFromDefaultExport:g}=b;i("default"!==e),k[e]=null!==(c=k[e])&&void 0!==c?c:[],k[e].push({exportValue:f,exportSource:"".concat(a.filePath," > ").concat(g?"`export default { ".concat(e," }`"):"`export { ".concat(e," }`")),filePath:a.filePath,_filePath:a.filePath,_fileType:a.fileType,_isFromDefaultExport:g})})}),e){var{configValues:c}=e;Ge(c).forEach(a=>{var b,l,n,[o,c]=a,q=e.configElements[o];i(q);var{configDefinedByFile:h,configDefinedAt:m}=q;i(h),j[o]=null!==(b=j[o])&&void 0!==b?b:c,f[o]=null!==(l=f[o])&&void 0!==l?l:[],i(0===f[o].length),f[o].push({configValue:c,configDefinedAt:m,configDefinedByFile:h});var r=o;k[r]=null!==(n=k[r])&&void 0!==n?n:[],k[r].push({exportValue:c,exportSource:m,filePath:h,_filePath:h,_fileType:null,_isFromDefaultExport:null})})}var h=Xe(),m={};return Object.entries(k).forEach(a=>{var[b,d]=a;d.forEach(a=>{var c,{exportValue:e,_fileType:f,_isFromDefaultExport:g}=a;m[b]=null!==(c=m[b])&&void 0!==c?c:e,".page"===f&&!g&&(b in h||(h[b]=e))})}),i(!("default"in m)),i(!("default"in k)),{config:j,configEntries:f,exports:m,exportsAll:k,pageExports:h}}function Ke(a){var{filePath:b,fileExports:c}=a;i(c),i(oe(b));var d=[];return Object.entries(c).sort(Ae(a=>{var[b]=a;return"default"===b})).forEach(c=>{var[e,f]=c,g="default"===e;if(g)if(je(b))e="Page";else return y(w(f),"The `export default` of ".concat(b," should be an object.")),void Object.entries(f).forEach(a=>{var[e,f]=a;Ye(e,b),d.push({exportName:e,exportValue:f,isFromDefaultExport:g})});d.push({exportName:e,exportValue:f,isFromDefaultExport:g})}),d.forEach(a=>{var{exportName:b,isFromDefaultExport:c}=a;i(!(c&&ce.includes(b)))}),d}function Xe(){return new Proxy({},{get(){return G()||$(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...arguments)}})}function Qe(a){var b=k(a.split(".page."),0,-1).join(".page.");return i(!b.includes("\\")),b}function T(a){le(a)}function Dt(a,b){if(0<b.length){var c=b.filter(a=>a.isErrorPage);return 0===c.length?null:(y(1===c.length,"Only one error page can be defined"),c[0].pageId)}var d=V(a.map(a=>{var{pageId:b}=a;return b}).filter(a=>C(a)));if(y(1>=d.length,"Only one _error.page.js is allowed, but found several: ".concat(d.join(" "))),0<d.length){var e=d[0];return i(e),e}return null}function C(a){return i(!a.includes("\\")),a.includes("/_error")}function Ze(a,b){if(0<b.length){var c=b.find(b=>b.pageId===a);return i(c),c.isErrorPage}return C(a)}var et=[".page",".page.server",".page.route",".page.client",".css"];function tt(a){if(le(a),a.endsWith(".css"))return".css";i(oe(a),a);var b=a.split("/").slice(-1)[0].split("."),c=b.slice(-3)[0],d=b.slice(-2)[0];return"page"===d?".page":(i("page"===c,a),"server"===d)?".page.server":"client"===d?".page.client":"route"===d?".page.route":void i(!1,a)}function ue(a){var b=tt(a),c={filePath:a,fileType:b,isEnv:a=>(i(".page.route"!==b),"CLIENT_ONLY"===a)?".page.client"===b||".css"===b:"SERVER_ONLY"===a?".page.server"===b:"CLIENT_AND_SERVER"===a?".page"===b:void i(!1),isRelevant:a=>c.pageId===a||c.isDefaultPageFile&&(K(c.filePath)||nt(a,c.filePath)),isDefaultPageFile:D(a),isRendererPageFile:".css"!==b&&D(a)&&K(a),isErrorPageFile:C(a),pageId:Qe(a)};return c}function D(a){return T(a),!C(a)&&a.includes("/_default")}function K(a){return T(a),a.includes("/renderer/")}function nt(a,b){T(a),T(b),i(!a.endsWith("/")),i(!b.endsWith("/")),i(D(b));var c=k(b.split("/"),0,-1).filter(a=>"_default"!==a).join("/");return a.startsWith(c)}function st(a){i(Array.isArray(a)||null===a),i(null!==a),a.forEach(a=>{i(w(a)),i(f(a,"pageId","string")),i(f(a,"routeFilesystem","string")||f(a,"routeFilesystem","null")),i(f(a,"routeFilesystemDefinedBy","string")||f(a,"routeFilesystemDefinedBy","null")),i(f(a,"loadCodeFiles","function")),i(f(a,"isErrorPage","boolean")),i(f(a,"configElements","object")),fe(a.configElements,!1)})}function rt(a){fe(a,!0)}function fe(a,b){i(w(a)),Object.entries(a).forEach(a=>{var[c,d]=a;return(i(w(d)||null===d),null===d)?void i(b):void(i(f(d,"configDefinedAt","string")),i(f(d,"plusConfigFilePath","string")||f(d,"plusConfigFilePath","null")),i(f(d,"configEnv","string")),i(f(d,"codeFilePath","string")||f(d,"codeFilePath","null")),i(f(d,"codeFileExport","string")||f(d,"codeFileExport","null")),i(f(d,"configValueSerialized","string")||f(d,"configValueSerialized","undefined")),(b||"route"===c)&&i(f(d,"configValue")||f(d,"configValueSerialized")))})}var it=[{is:a=>void 0===a,match:a=>"!undefined"===a,serialize:()=>"!undefined",deserialize:()=>{}},{is:a=>a===1/0,match:a=>"!Infinity"===a,serialize:()=>"!Infinity",deserialize:()=>1/0},{is:a=>a===-1/0,match:a=>"!-Infinity"===a,serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:a=>"number"==typeof a&&isNaN(a),match:a=>"!NaN"===a,serialize:()=>"!NaN",deserialize:()=>NaN},{is:a=>a instanceof Date,match:a=>a.startsWith("!Date:"),serialize:a=>"!Date:"+a.toISOString(),deserialize:a=>new Date(a.slice(6))},{is:a=>"bigint"==typeof a,match:a=>a.startsWith("!BigInt:"),serialize:a=>"!BigInt:"+a.toString(),deserialize:a=>{if("u"<typeof BigInt)throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(a.slice(8))}},{is:a=>a instanceof RegExp,match:a=>a.startsWith("!RegExp:"),serialize:a=>"!RegExp:"+a.toString(),deserialize:a=>{a=a.slice(8);var b=a.match(/\/(.*)\/(.*)?/),c=b[1],d=b[2];return new RegExp(c,d)}},{is:a=>a instanceof Map,match:a=>a.startsWith("!Map:"),serialize:(a,b)=>"!Map:"+b(Array.from(a.entries())),deserialize:(a,b)=>new Map(b(a.slice(5)))},{is:a=>a instanceof Set,match:a=>a.startsWith("!Set:"),serialize:(a,b)=>"!Set:"+b(Array.from(a.values())),deserialize:(a,b)=>new Set(b(a.slice(5)))},{is:a=>"string"==typeof a&&a.startsWith("!"),match:a=>a.startsWith("!"),serialize:a=>"!"+a,deserialize:a=>a.slice(1)}];function J(a){var b=JSON.parse(a);return de(b)}function de(a){return"string"==typeof a?ot(a):("object"==typeof a&&null!==a&&Object.entries(a).forEach(b=>{var[c,d]=b;a[c]=de(d)}),a)}function ot(a){for(var{match:b,deserialize:c}of it)if(b(a))return c(a,J);return a}function at(a){a.forEach(a=>{Object.entries(a.configElements).forEach(a=>{var[b,c]=a;lt(c),"route"===b&&ct(c)})})}function lt(a){var{configValueSerialized:b}=a;void 0!==b&&(a.configValue=J(b))}function ct(a){i(f(a,"configValue"));var{configValue:b}=a,c=typeof b;y("string"==c||x(b),"".concat(a.configDefinedAt," has an invalid type '").concat(c,"': it should be a string or a function instead, see https://vite-plugin-ssr.com/route"))}function ut(a){i(f(a,"isGeneratedFile")),i(!1!==a.isGeneratedFile,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),i(!0===a.isGeneratedFile,"`isGeneratedFile === ".concat(a.isGeneratedFile,"`")),i(f(a,"pageFilesLazy","object")),i(f(a,"pageFilesEager","object")),i(f(a,"pageFilesExportNamesLazy","object")),i(f(a,"pageFilesExportNamesEager","object")),i(f(a.pageFilesLazy,".page")),i(f(a.pageFilesLazy,".page.client")||f(a.pageFilesLazy,".page.server")),i(f(a,"pageFilesList","string[]")),i(f(a,"pageConfigs")),i(f(a,"pageConfigGlobal"));var{pageConfigs:b,pageConfigGlobal:c}=a;st(b),at(b),rt(c);var d={};F(a.pageFilesLazy).forEach(b=>{var e,{filePath:f,pageFile:g,globValue:h}=b;g=d[f]=null!==(e=d[f])&&void 0!==e?e:g;var i=h;X(i),g.loadFile=/*#__PURE__*/_asyncToGenerator(function*(){"fileExports"in g||(g.fileExports=yield i(),Je(g))})}),F(a.pageFilesExportNamesLazy).forEach(b=>{var e,{filePath:g,pageFile:h,globValue:j}=b;h=d[g]=null!==(e=d[g])&&void 0!==e?e:h;var k=j;X(k),h.loadExportNames=/*#__PURE__*/_asyncToGenerator(function*(){if(!("exportNames"in h)){var a=yield k();y("exportNames"in a,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),i(f(a,"exportNames","string[]"),h.filePath),h.exportNames=a.exportNames}})}),F(a.pageFilesEager).forEach(b=>{var e,{filePath:f,pageFile:g,globValue:h}=b;g=d[f]=null!==(e=d[f])&&void 0!==e?e:g;var j=h;i(w(j)),g.fileExports=j}),F(a.pageFilesExportNamesEager).forEach(b=>{var e,{filePath:g,pageFile:h,globValue:j}=b;h=d[g]=null!==(e=d[g])&&void 0!==e?e:h;var k=j;i(w(k)),i(f(k,"exportNames","string[]"),h.filePath),h.exportNames=k.exportNames}),a.pageFilesList.forEach(b=>{var c;d[b]=null!==(c=d[b])&&void 0!==c?c:ue(b)});var e=Object.values(d);return e.forEach(a=>{var{filePath:b}=a;i(!b.includes("\\"))}),{pageFiles:e,pageConfigs:b,pageConfigGlobal:c}}function F(a){var b=[];return Object.entries(a).forEach(a=>{var[c,d]=a;i(et.includes(c)),i(w(d)),Object.entries(d).forEach(d=>{var[e,f]=d,g=ue(e);i(g.fileType===c),b.push({filePath:e,pageFile:g,globValue:f})})}),b}function X(a){i(x(a))}var R=P("setPageFiles.ts",{});function Nt(a){var{pageFiles:b,pageConfigs:c,pageConfigGlobal:d}=ut(a);R.pageFilesAll=b,R.pageConfigs=c,R.pageConfigGlobal=d}function zt(){return _zt.apply(this,arguments)}function _zt(){return _zt=_asyncToGenerator(function*(a,b){a?(i(!R.pageFilesGetter),i(void 0===b)):(i(R.pageFilesGetter),i("boolean"==typeof b),(!R.pageFilesAll||!b)&&(yield R.pageFilesGetter()));var{pageFilesAll:c,pageConfigs:d,pageConfigGlobal:e}=R;i(c&&d&&e);var f=ft(c,d);return{pageFilesAll:c,allPageIds:f,pageConfigs:d,pageConfigGlobal:e}}),_zt.apply(this,arguments)}function ft(a,b){var c=a.filter(a=>{var{isDefaultPageFile:b}=a;return!b}).map(a=>{var{pageId:b}=a;return b}),d=V(c),e=b.map(a=>a.pageId);return[...d,...e]}function dt(a,b){return ge(a,b,!0)}function Vt(a,b){return ge(a,b,!1)}function ge(b,e,f){var j=f?"CLIENT_ONLY":"SERVER_ONLY",k=b.filter(a=>a.isRelevant(e)&&".page.route"!==a.fileType).sort(gt(f,e)),h=a=>{var b=k.filter(b=>b.pageId===e&&b.isEnv(a?"CLIENT_AND_SERVER":j));y(1>=b.length,"Merge the following files into a single file: ".concat(b.map(a=>a.filePath).join(" ")));var c=b[0];return i(void 0===c||!c.isDefaultPageFile),c},m=h(!1),a=h(!0),l=a=>k.filter(b=>b.isRendererPageFile&&b.isEnv(a?"CLIENT_AND_SERVER":j))[0],c=l(!1),n=l(!0),g=k.filter(a=>a.isDefaultPageFile&&!a.isRendererPageFile&&(a.isEnv(j)||a.isEnv("CLIENT_AND_SERVER")));return[m,a,...g,c,n].filter(Ne)}function gt(a,b){var c=a?"CLIENT_ONLY":"SERVER_ONLY";return(d,a)=>{if(!d.isDefaultPageFile&&a.isDefaultPageFile)return-1;if(!a.isDefaultPageFile&&d.isDefaultPageFile)return 1;{var e=d.isRendererPageFile,f=a.isRendererPageFile;if(!e&&f)return-1;if(!f&&e)return 1;i(e===f)}{var g=Q(b,d.filePath),h=Q(b,a.filePath);if(g<h)return-1;if(h<g)return 1;i(g===h)}{if(d.isEnv(c)&&a.isEnv("CLIENT_AND_SERVER"))return-1;if(a.isEnv(c)&&d.isEnv("CLIENT_AND_SERVER"))return 1}return 0}}function Q(b,c){T(b),T(c);for(var d=0;d<b.length&&d<c.length&&b[d]===c[d];d++);var e=b.slice(d),f=c.slice(d),g=e.split("/").length,h=f.split("/").length;return g+h}function Z(a){var b=a/1e3;if(120>b){var c=ee(b);return"".concat(c," second").concat(te(c))}{var d=ee(b/60);return"".concat(d," minute").concat(te(d))}}function ee(a){var b=a.toFixed(1);return b.endsWith(".0")&&(b=b.slice(0,-2)),b}function te(a){return"1"===a?"":"s"}var ht=P("utils/executeHook.ts",{userHookErrors:new Map});function pt(b,e,f){var h,i,{timeoutErr:j,timeoutWarn:d}=mt(e),k=new Promise((a,b)=>{h=b=>{l(),a(b)},i=a=>{l(),b(a)}}),l=()=>{clearTimeout(c),clearTimeout(m)},c=setTimeout(()=>{$(!1,"The ".concat(e,"() hook defined by ").concat(f," is taking more than ").concat(Z(d)))},d),m=setTimeout(()=>{var a=Se("Hook timeout: the ".concat(e,"() hook defined by ").concat(f," didn't finish after ").concat(Z(j)));i(a)},j);return _asyncToGenerator(function*(){try{var a=yield b();h(a)}catch(a){w(a)&&ht.userHookErrors.set(a,{hookName:e,hookFilePath:f}),i(a)}})(),k}function mt(a){return"onBeforeRoute"===a?{timeoutErr:5000,timeoutWarn:1000}:"onBeforePrerender"===a?{timeoutErr:600000,timeoutWarn:30000}:{timeoutErr:40000,timeoutWarn:4000}}function Bt(a){var b,c=window.location.href,{searchOriginal:d,hashOriginal:e,pathname:f}=Le(c,"/");return b=null!=a&&a.withoutHash?"".concat(f).concat(d||""):"".concat(f).concat(d||"").concat(e||""),i(b.startsWith("/")),b}i(G());function Ut(){var a=document.getElementById("vite-plugin-ssr_pageContext");y(a,"The element #".concat("vite-plugin-ssr_pageContext"," (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #").concat("vite-plugin-ssr_pageContext"," from the HTML nor from the DOM."));var b=a.textContent;i(b);var c=J(b);i(f(c,"pageContext","object"));var{pageContext:d}=c;return i(f(d,"_pageId","string")),M(d,{_pageContextRetrievedFromServer:_objectSpread({},d),_comesDirectlyFromServer:!0}),d}function N(a,b){if(!(b in a.exports))return null;var c=a.exports[b],d=a.exportsAll[b][0];i(d.exportValue===c);var e=d.exportSource;return i(e),i(!b.endsWith(")")),y(x(c),"hook ".concat(b,"() defined by ").concat(e," should be a function")),{hookFn:c,hookFilePath:e}}function Ht(a,b){N(a,b)}function yt(a){var b=Object.entries(a);for(var c in a)delete a[c];b.sort((a,b)=>{var[c]=a,[d]=b;return De(c,d)}).forEach(b=>{var[c,d]=b;a[c]=d})}function vt(a){Et(a),bt(a)}function Et(a){Ze(a._pageId,a._pageConfigs)&&i(f(a,"is404","boolean"))}function bt(a){if(void 0!==a.is404&&null!==a.is404){var b=a.pageProps||{};return w(b)?void(b.is404=b.is404||a.is404,a.pageProps=b):void $(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0})}}var W=P("preparePageContextForUserConsumptionClientSide.ts",{});function wt(a,b){if(b){var c=a;i([!0,!1].includes(c.isHydration)),i([!0,!1,null].includes(c.isBackwardNavigation))}else{var d=a;i(!0===d.isHydration),i(null===d.isBackwardNavigation)}i("config"in a),i("configEntries"in a),i("exports"in a),i("exportsAll"in a),i("pageExports"in a),i(w(a.pageExports));var e=a.exports.Page;M(a,{Page:e}),Tt(a),yt(a),i([!0,!1].includes(a._comesDirectlyFromServer));var f=a._comesDirectlyFromServer?St(a):a;return vt(a),f}var _t=["then","toJSON"],Rt=["_pageId"];function St(a){function b(b){return!(b in a||_t.includes(b)||"symbol"==typeof b||"string"!=typeof b||b.startsWith("__v_"))}return new Proxy(a,{get:function(c,d){return W.disableAssertPassToClient!==d&&$t(a._pageContextRetrievedFromServer,d,b(d)),W.disableAssertPassToClient=d,window.setTimeout(()=>{W.disableAssertPassToClient=void 0},0),a[d]}})}function $t(a,b,c){if(c&&null!==a){var d=Object.keys(a).filter(a=>!Rt.includes(a));y(!1,["pageContext.".concat(b," isn't available in the browser"),"('".concat(b,"' is missing in the passToClient list [").concat(d.map(a=>"'".concat(a,"'")).join(", "),"])."),"Did you forget to add '".concat(b,"' to the passToClient list?"),"See https://vite-plugin-ssr.com/passToClient"].join(" "))}}function Tt(a){Object.entries(a).forEach(b=>{var[c,d]=b;delete a[c],a[c]=d})}function Pt(a,b){var c,d=a.filter(a=>a.pageId===b);return i(1>=d.length),null!==(c=d[0])&&void 0!==c?c:null}function It(){return _It.apply(this,arguments)}function _It(){return _It=_asyncToGenerator(function*(b,a){var e={};return!a&&"configValues"in b||((yield b.loadCodeFiles()).forEach(f=>{var d,{configName:g,codeFilePath:j}=f;if(f.isPlusFile){var{codeFileExports:a}=f;"client"!==g&&Ue(a,j),Object.entries(a).forEach(a=>{var[c,k]=a,g="default"!==c,d=g?c:f.configName,l=k;if(e[d]=l,g){var h=b.configElements[f.configName];i(h),b.configElements[d]={configValue:l,codeFileExport:c,codeFilePath:j,configDefinedByFile:j,configDefinedAt:"".concat(j," > export { ").concat(c," }"),configEnv:h.configEnv,plusConfigFilePath:null}}})}else d=f.codeFileExportValue,e[g]=d}),Object.entries(b.configElements).map(a=>{var[b,c]=a;c.codeFilePath||(e[b]=c.configValue)}),M(b,{configValues:e})),b}),_It.apply(this,arguments)}var he="__whileFetchingAssets";function Gt(){return _Gt.apply(this,arguments)}function _Gt(){return _Gt=_asyncToGenerator(function*(b,d,e){var f,h=dt(b,e),i=Pt(d,e);try{f=(yield Promise.all([i&&It(i,!1),...h.map(a=>{var b;return null===(b=a.loadFile)||void 0===b?void 0:b.call(a)})]))[0]}catch(a){throw jt(a)&&Object.assign(a,{[he]:!0}),a}var{config:j,configEntries:a,exports:k,exportsAll:c,pageExports:l}=qe(h,f);return{config:j,configEntries:a,exports:k,exportsAll:c,pageExports:l,_pageFilesLoaded:h}}),_Gt.apply(this,arguments)}function Mt(a){return!!a&&!0===a[he]}function jt(a){return!!(a instanceof Error)&&["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(b=>a.message.toLowerCase().includes(b.toLowerCase()))}function Jt(){return _Jt.apply(this,arguments)}function _Jt(){return _Jt=_asyncToGenerator(function*(b,d){var e,f=wt(b,d),g=null;g=N(b,"render"),e="render";{var h=N(b,"onRenderClient");h&&(g=h,e="onRenderClient")}if(!g){var j=Lt(b);if(0<b._pageConfigs.length)y(!1,"No onRenderClient() hook defined for URL '".concat(j,"', but it's needed, see https://vite-plugin-ssr.com/onRenderClient"));else{var k,l=b._pageFilesLoaded.filter(a=>".page.client"===a.fileType);k=0===l.length?"No file `*.page.client.*` found for URL "+j:"One of the following files should export a `render()` hook: "+l.map(a=>a.filePath).join(" "),y(!1,k)}}i(g);var c=g.hookFn;i(e);var m=yield pt(()=>c(f),e,g.hookFilePath);y(void 0===m,"The ".concat(e,"() hook defined by ").concat(g.hookFilePath," isn't allowed to return a value"))}),_Jt.apply(this,arguments)}function Lt(a){var b,c;try{c=a.urlOriginal}catch(a){}return c=null!==(b=c)&&void 0!==b?b:window.location.href,c}export{Se as A,zt as B,Ce as C,dt as D,Pt as E,ae as F,kt as G,$e as H,Mt as I,Ht as J,Jt as K,Ot as L,Ct as M,Ft as N,w as a,i as b,xt as c,G as d,Bt as e,Vt as f,P as g,$ as h,x as i,y as j,At as k,f as l,We as m,Wt as n,M as o,Le as p,k as q,C as r,Nt as s,N as t,pt as u,Ut as v,Gt as w,Dt as x,wt as y,J as z};